/**
 * mpxjs webview bridge v2.0.0
 * (c) 2019 @mpxjs team
 * @license Apache
 */
const e={wx:"https://res.wx.qq.com/open/js/jweixin-1.3.2.js",ali:"https://appx/web-view.min.js",baidu:"https://b.bdstatic.com/searchbox/icms/searchbox/js/swan-2.0.4.js",tt:"https://s3.pstatp.com/toutiao/tmajssdk/jssdk.js"},o={wx:["wx","miniProgram"],ali:["my"],baidu:["swan","webView"],tt:["tt","miniProgram"]};let a=null;navigator.userAgent.indexOf("AlipayClient")>-1?a="ali":navigator.userAgent.indexOf("miniProgram")>-1?a="wx":navigator.userAgent.indexOf("swan")>-1?a="baidu":navigator.userAgent.indexOf("toutiao")>-1&&(a="tt"),null===a&&console.error("mpxjs/webview: \u672a\u8bc6\u522b\u7684\u73af\u5883\uff0c\u5f53\u524d\u4ec5\u652f\u6301 \u5fae\u4fe1\u3001\u652f\u4ed8\u5b9d\u3001\u767e\u5ea6\u3001\u5934\u6761 \u5c0f\u7a0b\u5e8f");const t=window[a]?Promise.resolve():e[a]?function(e,{time:o=5e3,crossOrigin:a=!1}={}){return Promise.race([new Promise((o,t)=>{let r=document.createElement("script");r.type="text/javascript",r.async="async",a&&(r.crossOrigin="anonymous"),r.onload=r.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||(o(),r.onload=r.onreadystatechange=null)},r.onerror=function(){t(new Error(`load ${e} error`)),r.onerror=null},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)}),new Promise((a,t)=>{setTimeout(()=>{t(new Error(`load ${e} timeout`))},o)})])}(e[a]):Promise.reject(new Error("\u672a\u627e\u5230\u5bf9\u5e94\u7684sdk"));let r=null;const n=()=>"wx"!==a?t:new Promise((e,o)=>{t.then(()=>{window.wx||o(new Error("sdk\u672a\u5c31\u7eea")),null===r&&o(new Error("wxSDK \u672a\u914d\u7f6e")),window.wx.config(r),window.wx.ready(()=>{e()}),window.wx.error(e=>{o(e)})})}),i=e=>{r=e};const s={checkJSApi:{wx:"checkJSApi"},chooseImage:{wx:"chooseImage",baidu:"chooseImage",ali:"chooseImage"},previewImage:{wx:"previewImage",baidu:"previewImage",ali:"previewImage"},uploadImage:{wx:"uploadImage"},downloadImage:{wx:"downloadImage"},getLocalImgData:{wx:"getLocalImgData"},startRecord:{wx:"startRecord"},stopRecord:{wx:"stopRecord"},onVoiceRecordEnd:{wx:"onVoiceRecordEnd"},playVoice:{wx:"playVoice"},pauseVoice:{wx:"pauseVoice"},stopVoice:{wx:"stopVoice"},onVoicePlayEnd:{wx:"onVoicePlayEnd"},uploadVoice:{wx:"uploadVoice"},downloadVoice:{wx:"downloadVoice"},translateVoice:{wx:"translateVoice"},getNetworkType:{wx:"getNetworkType",baidu:"getNetworkType",ali:"getNetworkType"},openLocation:{wx:"openLocation",baidu:"openLocation",ali:"openLocation"},getLocation:{wx:"getLocation",baidu:"getLocation",ali:"getLocation"},startSearchBeacons:{wx:"startSearchBeacons"},stopSearchBeacons:{wx:"stopSearchBeacons"},onSearchBeacons:{wx:"onSearchBeacons"},scanQRCode:{wx:"scanQRCode"},chooseCard:{wx:"chooseCard"},addCard:{wx:"addCard"},openCard:{wx:"openCard"},alert:{ali:"alert"},showLoading:{ali:"showLoading"},hideLoading:{ali:"hideLoading"},setStorage:{ali:"setStorage"},getStorage:{ali:"getStorage"},removeStorage:{ali:"removeStorage"},clearStorage:{ali:"clearStorage"},getStorageInfo:{ali:"getStorageInfo"},startShare:{ali:"startShare"},tradePay:{ali:"tradePay"},onMessage:{ali:"onMessage"}},c={};for(let e in s)c[e]=(...t)=>{s[e][a]?n().then(()=>{window[o[a][0]][s[e][a]](...t)},e=>{console.error(e)}).catch(e=>console.error(e)):console.error(`\u6b64\u73af\u5883\u4e0d\u652f\u6301${e}\u65b9\u6cd5`)};const w={navigateTo:"navigateTo",navigateBack:"navigateBack",switchTab:"switchTab",reLaunch:"reLaunch",redirectTo:"redirectTo",getEnv:"getEnv",postMessage:"postMessage",onMessage:{ali:!0}},d={};for(let e in w){const r="string"==typeof w[e]?w[e]:!!w[e][a]&&("string"==typeof w[e][a]?w[e][a]:e);d[e]=(...n)=>{r?t.then(()=>{o[a].reduce((e,o)=>e[o],window)[r](...n)},e=>{console.error(e)}).catch(e=>console.log(e)):console.log(`${a}\u5c0f\u7a0b\u5e8f\u4e0d\u652f\u6301 ${e} \u65b9\u6cd5`)}}const g={...d,...c,wxsdkConfig:i},{navigateTo:l,navigateBack:p,switchTab:x,reLaunch:m,redirectTo:h,getEnv:u,postMessage:y}=d,{getLocation:v,chooseImage:S,openLocation:L,getNetworkType:b,previewImage:I}=c;export default g;export{S as chooseImage,u as getEnv,v as getLocation,b as getNetworkType,p as navigateBack,l as navigateTo,L as openLocation,y as postMessage,I as previewImage,m as reLaunch,h as redirectTo,x as switchTab,i as wxsdkConfig};